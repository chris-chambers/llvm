// FIXME: Add standard header.

#include "SbbmFunctionPasses.h"
#include "SbbmSubtarget.h"
#include "SbbmTargetMachine.h"
#include "llvm/CodeGen/SelectionDAGISel.h"

using namespace llvm;

namespace {

class SbbmDAGToDAGISel : public SelectionDAGISel {
public:
  explicit SbbmDAGToDAGISel(SbbmTargetMachine &TM, CodeGenOpt::Level OptLevel)
      : SelectionDAGISel(TM, OptLevel)
  { }

  virtual const char *getPassName() const {
    return "SBBM DAG->DAG Pattern Instruction Selection";
  }

  virtual SDNode *Select(SDNode *N) override {
    return SelectCode(N);
  }

private:
// Include the pieces autogenerated from the target description.
#include "SbbmGenDAGISel.inc"

};

} // anonymous namespace

FunctionPass *llvm::createSbbmISelDag(
  SbbmTargetMachine &TM, CodeGenOpt::Level OptLevel)
{
  return new SbbmDAGToDAGISel(TM, OptLevel);
}
